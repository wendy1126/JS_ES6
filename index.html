<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button id="ë²„íŠ¼">ë²„íŠ¼</button>


    <script>
        // ìµœìƒë‹¨ì— use strict ì“°ë©´ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—„ê²©í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥(strict mode)
        'use strict';

        // this ëœ» 
        // ğŸ 1. {Window}(ê·¸ëƒ¥ ì“°ê±°ë‚˜ ì¼ë°˜ í•¨ìˆ˜ ì•ˆì—ì„œ ì“¸ ë•Œ)
        // + strict modeì—ì„œ í•¨ìˆ˜ì•ˆì—ì„œ thisì“°ë©´ undefined ì¶œë ¥
        console.log(this);

        function í•¨ìˆ˜(){
            console.log(this);
        }
        í•¨ìˆ˜(); // window.í•¨ìˆ˜(); ì™€ ë™ì¼í•œ ê²°ê³¼ ë‚˜ì˜´

        // ğŸ 2. ì˜¤ë¸Œì íŠ¸ ë‚´ í•¨ìˆ˜(ë©”ì†Œë“œ)ì•ˆì—ì„œ ì“°ë©´, ê·¸ í•¨ìˆ˜ë¥¼ ê°€ì§€ê³  ìˆëŠ” ì˜¤ë¸Œì íŠ¸ë¥¼ ëœ»í•¨(ìì‹ ì„ í¬í•¨í•˜ê³ ìˆëŠ” ì˜¤ë¸Œì íŠ¸)
        var ì˜¤ë¸Œì íŠ¸ = {
            data : 'kim',
            í•¨ìˆ˜ : function(){
                console.log(this);
            }
        }
        ì˜¤ë¸Œì íŠ¸.í•¨ìˆ˜();

        var ì˜¤ë¸Œì íŠ¸2 = {
            data : {
                í•¨ìˆ˜ : function(){
                    console.log(this);
                }
            }
        }
        ì˜¤ë¸Œì íŠ¸2.data.í•¨ìˆ˜(); // ìµœìƒìœ„ ìš”ì†Œê°€ ì•„ë‹ˆë¼ ì˜¤ë¸Œì íŠ¸.dataê°€ ë‚˜ì˜´

        // arrow function íŠ¹ì§• : thisê°’ì„ í•¨ìˆ˜ ë°–ì— ìˆë˜ê±° ê·¸ëŒ€ë¡œ ì”€
        var ì˜¤ë¸Œì íŠ¸3 = {
            data : {
                í•¨ìˆ˜ : ()=> { // ì˜¤ë¸Œì íŠ¸ ì•ˆì— í•¨ìˆ˜ ë„£ì„ ë•Œ ì‹ ë¬¸ë²• -> í•¨ìˆ˜(){} ì´ë ‡ê²Œ ì¨ë„ë¨
                    console.log(this);
                }
            }
        }
        ì˜¤ë¸Œì íŠ¸3.data.í•¨ìˆ˜();

        // ğŸ 3. ê¸°ê³„(constructor, ì˜¤ë¸Œì íŠ¸ ìƒì„±ê¸°ê³„) ì•ˆì—ì„œ ì“°ë©´ ìƒˆë¡œ ìƒì„±ë˜ëŠ” ì˜¤ë¸Œì íŠ¸(instance)ë¥¼ ëœ»í•¨
        var ì–´ì©Œêµ¬ = {}
        function ê¸°ê³„(){
            this.ì´ë¦„ = 'kim'
        }
        var ì˜¤ë¸Œì íŠ¸ = new ê¸°ê³„();

        // ğŸ 4. ì´ë²¤íŠ¸ë¦¬ìŠ¤ë„ˆ ì•ˆì—ì„œëŠ” e.currentTarget
        document.getElementById('ë²„íŠ¼').addEventListener('click', function(e){
            // this; //e.currentTarget;(ì§€ê¸ˆ ì´ë²¤íŠ¸ ë™ì‘í•˜ëŠ” ê³³)ê³¼ ê°™ì€ ì˜ë¯¸
            console.log(this);  
            console.log(e.currentTarget);

            // caseStudy. forEach ë‚´ì—ì„œ ì½œë°±í•¨ìˆ˜ ì“´ë‹¤ë©´ thisëŠ”?(ê·¸ëƒ¥ ì¼ë°˜í•¨ìˆ˜ì„)
            var ì–´ë ˆì´ = [1,2,3];
            ì–´ë ˆì´.forEach(function(a){
                console.log(this) //window
            });
        })

        // caseStudy. ì˜¤ë¸Œì íŠ¸ ë‚´ì—ì„œ ì½œë°±í•¨ìˆ˜ ì“´ë‹¤ë©´ thisëŠ”?(ê·¸ëƒ¥ ì¼ë°˜í•¨ìˆ˜ì„)
        var ì˜¤ë¸Œì íŠ¸4 = {
            ì´ë¦„ë“¤ : ['ê¹€', 'ì´', 'ë°•'],
            í•¨ìˆ˜ : function(){
                console.log(this); // ì˜¤ë¸Œì íŠ¸4
                ì˜¤ë¸Œì íŠ¸4.ì´ë¦„ë“¤.forEach(function(){
                    console.log(this);
                })
            }
        }
        ì˜¤ë¸Œì íŠ¸4.í•¨ìˆ˜(); // window


        // caseStudy. arrow function ì•ˆì—ì„œì˜ this? 
        // arrow function íŠ¹ì§• : ë‚´ë¶€ì˜ thisê°’ì„ ë³€í™”ì‹œí‚¤ì§€ ì•ŠìŒ(ì™¸ë¶€ thisê°’ ê·¸ëŒ€ë¡œ ì¬ì‚¬ìš© ê°€ëŠ¥)
        var ì˜¤ë¸Œì íŠ¸5 = {
            ì´ë¦„ë“¤ : ['ê¹€', 'ì´', 'ë°•'],
            í•¨ìˆ˜ : function(){
                console.log(this); // ì˜¤ë¸Œì íŠ¸5
                ì˜¤ë¸Œì íŠ¸5.ì´ë¦„ë“¤.forEach(()=>{
                    console.log(this); // ì˜¤ë¸Œì íŠ¸5
                })
            }
        }
        ì˜¤ë¸Œì íŠ¸5.í•¨ìˆ˜();


        // âœ¨ í•¨ìˆ˜ë§Œë“œëŠ” ë°©ë²• 1
        function í•¨ìˆ˜(){}
        // âœ¨ í•¨ìˆ˜ë§Œë“œëŠ” ë°©ë²• 2
        var í•¨ìˆ˜ = function(){}
        // âœ¨ í•¨ìˆ˜ë§Œë“œëŠ” ë°©ë²• 3(arrow function)
        var í•¨ìˆ˜ = ()=> {}

        // í•¨ìˆ˜ ë§Œë“œëŠ” ì´ìœ 
        // 1. ì½”ë“œë“¤ì„ ê¸°ëŠ¥ìœ¼ë¡œ ë¬¶ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©
        // 2. ì…ì¶œë ¥ ê¸°ê³„ë¥¼ ë§Œë“¤ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©
        // 2.ex) var í•¨ìˆ˜=(a)=>{return a+10} í•¨ìˆ˜(5);
        // íŒŒë¼ë¯¸í„° 1ê°œë©´ ì†Œê´„í˜¸ ìƒëµ ê°€ëŠ¥ : var í•¨ìˆ˜=a=>{return a+10}
        // ì½”ë“œ í•œì¤„ì´ë©´ ì¤‘ê´„í˜¸ë„ ìƒëµ ê°€ëŠ¥ : var í•¨ìˆ˜=a=>return a+10

        // ğŸŒˆ Arrow function ì˜ˆì‹œ
        // ğŸŒˆ 1. forEach ì½œë°±í•¨ìˆ˜
        [1,2,3,4].forEach(a=> console.log(a));

        // ğŸŒˆ 2. ì´ë²¤íŠ¸ë¦¬ìŠ¤ë„ˆ
        // ì¼ë°˜ ì´ë²¤íŠ¸ë¦¬ìŠ¤ë„ˆì—ì„  this==e.currentTarget
        // arrow function ì´ë²¤íŠ¸ë¦¬ìŠ¤ë„ˆì—ì„  this==ë°”ê¹¥ì˜ thisê°’(=window)
        document.getElementById('ë²„íŠ¼').addEventListener('click',(e)=>{
            // this; : window ë‚˜ì˜´
            e.currentTarget;
        })

        // ğŸŒˆ 3. Object ì•ˆì˜ í•¨ìˆ˜
        var ì˜¤ë¸Œì íŠ¸6 = {
            í•¨ìˆ˜ : ()=>{
                return this; // window ë‚˜ì˜´
            }
        }
        ì˜¤ë¸Œì íŠ¸6.í•¨ìˆ˜();

    </script>
</body>
</html>